<div class="main workspace">
   <div class="h-full">
      <div class="h-full">
         <div
            class="text-dark text-2xl font-semibold mb-4 flex justify-between items-end"
         >Completed Appointments
            <div class="text-dark text-opacity-70 font-normal text-base pe-4">{{ appointments.length }} in total</div>
         </div>
         <div class="text-end -top-24mt-8"></div>
         <div class="h-full">
            <div class="h-full">
               <ng-container *ngIf="appointments.length === 0">
                  <div
                     class="no-appointment-text -mt-12 text-center h-full flex items-center justify-center text-dark text-opacity-80"
                  >
                     No completed appointments
                  </div>
               </ng-container>
               <ng-container *ngFor="let appoint of appointments">
                  <div class="bg-primary-100 bg-opacity-90 rounded-lg shadow-lg p-6 mb-0 mt-6">
                     <div class="relative">
                        <div class="profile-img mb-2">
                           <div class="flex ps-0">
                              <div class="flex items-start flex-col justify-center gap-y-0">
                                 <div class="text-dark font-semibold text-xl flex justify-center">
                                    {{ appoint.patient?.name }}
                                 </div>
                                 <div>WhatsApp Contact:
                                    <a
                                       href="https://wa.me/{{ appoint.patient?.whatsappNumber }}"
                                       target="_blank"
                                       class="underline"
                                    >
                                       {{ appoint.patient?.whatsappNumber }}
                                    </a>
                                 </div>
                                 <div>Age: {{ appoint.patient?.dob | dob }}</div>
                              </div>
                           </div>
                        </div>
                        <div class="sm:absolute right-0 top-0 text-dark text-opacity-40 flex gap-x-4 items-start">
                           <app-rating-stars [rating]="appoint.rating"></app-rating-stars>
                           Appointment Number: {{ appoint.id }}
                        </div>
                        <div>
                           Requested Date: {{ appoint.paymentTime | datetime }}
                        </div>
                        <div>
                           Meeting Time: {{ [appoint.timeFrom, appoint.timeTo] | appointmentDuration }}
                        </div>
                        <!-- <div>Status: Accepted</div> -->
                        <div class="sm:absolute right-0 bottom-0">
                           <div #cardCollapseToggleBtn>
                              <form-submit-button
                                 (click)="expandable.classList.add('!grid-rows-[1fr]'); cardCollapseToggleBtn.classList.add('hidden')"
                                 btnStyle="btn-blue"
                                 label="More Details"
                              ></form-submit-button>
                           </div>
                        </div>
                        <div #expandable class="grid grid-rows-[0fr] transition-all duration-500 ease-in-out">
                           <div class="overflow-hidden pb-3">
                              <div class="mt-2">
                                 <div class="">Patient's Symptoms Description:</div>
                                 <div data-te-input-wrapper-init class="relative mb-3">
                                    <textarea
                                       [rows]="6"
                                       placeholder="Patient' Symptom Description"
                                       readonly
                                       rows="3"
                                       class="peer form-input---input"
                                    >{{ appoint.symptomDescription }}</textarea>
                                 </div>
                              </div>
                              <div class="mt-3">
                                 <div class="">Your Report</div>
                                 <div data-te-input-wrapper-init class="relative mb-3">
                                    <textarea
                                       [rows]="6"
                                       placeholder="Patient' Symptom Description"
                                       readonly
                                       rows="3"
                                       class="peer form-input---input"
                                    >{{ appoint.doctorReport }}</textarea>
                                 </div>
                              </div>
                              <div class="mt-3">
                                 <div class="">Patient's Review Reviews</div>
                                 <div data-te-input-wrapper-init class="relative mb-3">
                                    <textarea
                                       [rows]="6"
                                       placeholder="Not yet Provided"
                                       readonly
                                       rows="3"
                                       class="peer form-input---input"
                                    >{{ appoint.patientReview }}</textarea>
                                 </div>
                              </div>
                              <div class="flex justify-end items-center gap-x-3">
                                 <form-submit-button
                                    (click)="
                                       expandable.classList.remove('!grid-rows-[1fr]');
                                       cardCollapseToggleBtn.classList.remove('hidden');
                                    "
                                    btnStyle="btn-primary-100"
                                    label="Less Details"
                                 ></form-submit-button>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </ng-container>
            </div>
         </div>
      </div>
   </div>
</div>
